<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<!-- $Id$ -->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.3.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>

		<title lang="en">board3 Portal</title>
		<title lang="de">board3 Portal</title>

		<description lang="en">Adds a portal to your forum.
It has several boxes wich can be turned on an off in the ACP and certain settings.

Included language files:
» English (en)
» German (de)

More languages can be found in our International forum: http://www.board3.de/viewforum.php?f=13</description>
		<description lang="de">Fügt ein Portal deinem Forum hinzu.
Es hat diverse Boxen, die über das ACP an- / abgeschaltet und eingestellt werden können.

Enthaltenen Sprachdateien:
» Englisch (en)
» Deutsch (de)

Weitere Sprachen kannst in unseren International Forum finden: http://www.board3.de/viewforum.php?f=13
</description>

		<author-notes lang="en">I hope you get everything working. Further developement, new boxes for the portal or questions are welcome at www.board3.de
		
		Devolpers in earlier versions:
		nickvergessen: http://www.flying-bits.org/
		Redbull254: http://www.digitalfotografie-foren.de
		</author-notes>
		<author-notes lang="de">Ich hoffe ihr habt Spaß am Portal. Neuen Code, bzw neue Boxen und Fragen könnt ihr auf www.board3.de posten.
		
		Entwickler in früheren Versionen:
		nickvergessen: http://www.flying-bits.org/
		Redbull254: http://www.digitalfotografie-foren.de
		</author-notes>
	
		<author-group>
			<author>
				<realname>Ice</realname>
				<username>avaren</username>
				<homepage>http://www.board3.de</homepage>
				<contributions-group>
					<contributions status="current" position="Main-Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Kevin</realname>
				<username>saint_hh</username>
				<homepage>http://www.board3.de</homepage>
				<contributions-group>
					<contributions status="current" position="Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Christian</realname>
				<username>Christian_N</username>
				<homepage>http://www.phpbb-projekt.de</homepage>
				<contributions-group>
					<contributions status="current" position="Developer"></contributions>
				</contributions-group>
			</author>
			<author>
				<realname>Marc Alexander</realname>
				 <username>marc1706</username>
				<homepage>http://www.m-a-styles.de</homepage>
				<contributions-group>
					<contributions status="current" position="Developer"></contributions>
				</contributions-group>
			 </author>
		</author-group>

		<mod-version>1.0.5</mod-version>

		<installation>
			<level>easy</level>
			<time>600</time>
			<target-version>3.0.6</target-version>
		</installation>

		<link-group>
			<link type="parent" lang="de" href="../../install.xml">Installations-Anleitung</link>
			<link type="parent" lang="en" href="../../install.xml">Manual</link>
			<link type="language" lang="en" href="contrib/de.xml">Update instructions for German Language-set</link>
			<link type="language" lang="de" href="contrib/de.xml">Update-Anleitung für das deutsche Sprachpaket</link>
			<link type="template" lang="en" href="contrib/subsilver2.xml">Update instructions for subsilver2 Style</link>
			<link type="template" lang="de" href="contrib/subsilver2.xml">Update-Anleitung für das Style subsilver2</link>
		</link-group>
	</header>
	<action-group>
		<copy>
			<file from="root/portal.php" to="portal.php" />
			<file from="root/adm/mods/board3_portal_check_version.php" to="adm/mods/board3_portal_check_version.php" />
			<file from="root/adm/style/acp_portal.html" to="adm/style/acp_portal.html" />
			<file from="root/includes/acp/acp_portal.php" to="includes/acp/acp_portal.php" />
			<file from="root/includes/acp/info/acp_portal.php" to="includes/acp/info/acp_portal.php" />
			<file from="root/install/*.*" to="install/*.*" />
			<file from="root/install/schemas/*.*" to="install/schemas/*.*" />
			<file from="root/language/en/mods/lang_portal.php" to="language/en/mods/lang_portal.php" />
			<file from="root/language/en/mods/lang_portal_acp.php" to="language/en/mods/lang_portal_acp.php" />
			<file from="root/portal/block/announcements.php" to="portal/block/announcements.php" />
			<file from="root/portal/block/attachments.php" to="portal/block/attachments.php" />
			<file from="root/portal/block/birthday_list.php" to="portal/block/birthday_list.php" />
			<file from="root/portal/block/change_style.php" to="portal/block/change_style.php" />
			<file from="root/portal/block/custom.php" to="portal/block/custom.php" />
			<file from="root/portal/block/donate.php" to="portal/block/donate.php" />
			<file from="root/portal/block/friends.php" to="portal/block/friends.php" />
			<file from="root/portal/block/latest_bots.php" to="portal/block/latest_bots.php" />
			<file from="root/portal/block/latest_members.php" to="portal/block/latest_members.php" />
			<file from="root/portal/block/leaders.php" to="portal/block/leaders.php" />
			<file from="root/portal/block/leaders_ext.php" to="portal/block/leaders_ext.php" />
			<file from="root/portal/block/link_us.php" to="portal/block/link_us.php" />
			<file from="root/portal/block/links.php" to="portal/block/links.php" />
			<file from="root/portal/block/login_box.php" to="portal/block/login_box.php" />
			<file from="root/portal/block/main_menu.php" to="portal/block/main_menu.php" />
			<file from="root/portal/block/mini_cal.php" to="portal/block/mini_cal.php" />
			<file from="root/portal/block/news.php" to="portal/block/news.php" />
			<file from="root/portal/block/poll.php" to="portal/block/poll.php" />
			<file from="root/portal/block/random_member.php" to="portal/block/random_member.php" />
			<file from="root/portal/block/recent.php" to="portal/block/recent.php" />
			<file from="root/portal/block/search.php" to="portal/block/search.php" />
			<file from="root/portal/block/statistics.php" to="portal/block/statistics.php" />
			<file from="root/portal/block/top_posters.php" to="portal/block/top_posters.php" />
			<file from="root/portal/block/user_menu.php" to="portal/block/user_menu.php" />
			<file from="root/portal/block/welcome.php" to="portal/block/welcome.php" />
			<file from="root/portal/block/whois_online.php" to="portal/block/whois_online.php" />
			<file from="root/portal/block/wordgraph.php" to="portal/block/wordgraph.php" />
			<file from="root/portal/includes/functions.php" to="portal/includes/functions.php" />
			<file from="root/portal/includes/functions_version_check.php" to="portal/includes/functions_version_check.php" />
			<file from="root/styles/prosilver/template/portal/portal_body.html" to="styles/prosilver/template/portal/portal_body.html" />
			<file from="root/styles/prosilver/template/portal/portal_left.html" to="styles/prosilver/template/portal/portal_left.html" />
			<file from="root/styles/prosilver/template/portal/portal_center.html" to="styles/prosilver/template/portal/portal_center.html" />
			<file from="root/styles/prosilver/template/portal/portal_right.html" to="styles/prosilver/template/portal/portal_right.html" />
			<file from="root/styles/prosilver/template/portal/block/announcements.html" to="styles/prosilver/template/portal/block/announcements.html" />
			<file from="root/styles/prosilver/template/portal/block/announcements_compact.html" to="styles/prosilver/template/portal/block/announcements_compact.html" />
			<file from="root/styles/prosilver/template/portal/block/attachments.html" to="styles/prosilver/template/portal/block/attachments.html" />
			<file from="root/styles/prosilver/template/portal/block/birthday_list.html" to="styles/prosilver/template/portal/block/birthday_list.html" />
			<file from="root/styles/prosilver/template/portal/block/change_style.html" to="styles/prosilver/template/portal/block/change_style.html" />
			<file from="root/styles/prosilver/template/portal/block/clock.html" to="styles/prosilver/template/portal/block/clock.html" />
			<file from="root/styles/prosilver/template/portal/block/custom_center.html" to="styles/prosilver/template/portal/block/custom_center.html" />
			<file from="root/styles/prosilver/template/portal/block/custom_small.html" to="styles/prosilver/template/portal/block/custom_small.html" />
			<file from="root/styles/prosilver/template/portal/block/donation.html" to="styles/prosilver/template/portal/block/donation.html" />
			<file from="root/styles/prosilver/template/portal/block/donation_small.html" to="styles/prosilver/template/portal/block/donation_small.html" />
			<file from="root/styles/prosilver/template/portal/block/forumlist_search.html" to="styles/prosilver/template/portal/block/forumlist_search.html" />
			<file from="root/styles/prosilver/template/portal/block/general_block.html" to="styles/prosilver/template/portal/block/general_block.html" />
			<file from="root/styles/prosilver/template/portal/block/latest_bots.html" to="styles/prosilver/template/portal/block/latest_bots.html" />
			<file from="root/styles/prosilver/template/portal/block/latest_members.html" to="styles/prosilver/template/portal/block/latest_members.html" />
			<file from="root/styles/prosilver/template/portal/block/leaders.html" to="styles/prosilver/template/portal/block/leaders.html" />
			<file from="root/styles/prosilver/template/portal/block/leaders_ext.html" to="styles/prosilver/template/portal/block/leaders_ext.html" />
			<file from="root/styles/prosilver/template/portal/block/link_us.html" to="styles/prosilver/template/portal/block/link_us.html" />
			<file from="root/styles/prosilver/template/portal/block/links.html" to="styles/prosilver/template/portal/block/links.html" />
			<file from="root/styles/prosilver/template/portal/block/login_box.html" to="styles/prosilver/template/portal/block/login_box.html" />
			<file from="root/styles/prosilver/template/portal/block/main_menu.html" to="styles/prosilver/template/portal/block/main_menu.html" />
			<file from="root/styles/prosilver/template/portal/block/mini_calendar.html" to="styles/prosilver/template/portal/block/mini_calendar.html" />
			<file from="root/styles/prosilver/template/portal/block/news.html" to="styles/prosilver/template/portal/block/news.html" />
			<file from="root/styles/prosilver/template/portal/block/news_compact.html" to="styles/prosilver/template/portal/block/news_compact.html" />
			<file from="root/styles/prosilver/template/portal/block/online_friends.html" to="styles/prosilver/template/portal/block/online_friends.html" />
			<file from="root/styles/prosilver/template/portal/block/poll.html" to="styles/prosilver/template/portal/block/poll.html" />
			<file from="root/styles/prosilver/template/portal/block/random_member.html" to="styles/prosilver/template/portal/block/random_member.html" />
			<file from="root/styles/prosilver/template/portal/block/recent.html" to="styles/prosilver/template/portal/block/recent.html" />
			<file from="root/styles/prosilver/template/portal/block/search.html" to="styles/prosilver/template/portal/block/search.html" />
			<file from="root/styles/prosilver/template/portal/block/statistics.html" to="styles/prosilver/template/portal/block/statistics.html" />
			<file from="root/styles/prosilver/template/portal/block/top_poster.html" to="styles/prosilver/template/portal/block/top_poster.html" />
			<file from="root/styles/prosilver/template/portal/block/user_menu.html" to="styles/prosilver/template/portal/block/user_menu.html" />
			<file from="root/styles/prosilver/template/portal/block/welcome.html" to="styles/prosilver/template/portal/block/welcome.html" />
			<file from="root/styles/prosilver/template/portal/block/whois_online.html" to="styles/prosilver/template/portal/block/whois_online.html" />
			<file from="root/styles/prosilver/template/portal/block/wordgraph.html" to="styles/prosilver/template/portal/block/wordgraph.html" />
			<file from="root/styles/prosilver/theme/portal.css" to="styles/prosilver/theme/portal.css" />
			<file from="root/styles/prosilver/theme/images/portal/mini_cal_icon_left_arrow.png" to="styles/prosilver/theme/images/portal/mini_cal_icon_left_arrow.png" />
			<file from="root/styles/prosilver/theme/images/portal/mini_cal_icon_right_arrow.png" to="styles/prosilver/theme/images/portal/mini_cal_icon_right_arrow.png" />
		</copy>
		<open src="adm/index.php">
			<edit>
				<comment lang="de"><![CDATA[Es gibt keinen "Ersetze mit"-Code, da der Code gelöscht werden soll.]]></comment>
				<comment lang="en"><![CDATA[There is no "replace-with"-code as you need to delete the code.]]></comment>
				<find><![CDATA[require($phpbb_root_path . 'portal/includes/lang_adm_additional_blocks.' . $phpEx);]]></find>
				<action type="replace-with"><![CDATA[]]></action>
			</edit>
		</open>
		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[	$user->add_lang('mods/lang_portal');
	include_once($phpbb_root_path . 'portal/includes/functions.'.$phpEx);
	$portal_config = obtain_portal_config();]]></find>
				<action type="replace-with"><![CDATA[	$user->add_lang(array('mods/lang_portal', 'mods/additional_blocks'));
	if (!function_exists('obtain_portal_config'))
	{
		include($phpbb_root_path . 'portal/includes/functions.' . $phpEx);
	}
	if(sql_table_exists(PORTAL_CONFIG_TABLE) == true)
	{
		$portal_config = obtain_portal_config();
	}]]></action>
			</edit>
			<edit>
				<find><![CDATA[		'U_PORTAL'				=> ($portal_config['portal_enable']) ? append_sid("{$phpbb_root_path}portal.$phpEx") : '',]]></find>
				<action type="replace-with"><![CDATA[		'U_PORTAL'				=> (isset($portal_config['portal_enable']) && $portal_config['portal_enable'] == true) ? append_sid("{$phpbb_root_path}portal.$phpEx") : '',]]></action>
			</edit>
		</open>
		<open src="includes/session.php">
			<edit>
				<find><![CDATA[		if (!empty($_GET['style']))]]></find>
				<action type="replace-with"><![CDATA[		if (!empty($_GET['style']) && !defined('ADMIN_START'))]]></action>
			</edit>
		</open>
		<open src="portal/block/additional_blocks.php">
			<edit>
				<comment lang="de"><![CDATA[Wer die Datei komplett hochladen (überschreiben) möchte, kann diese Änderungen ignorieren. Bereits gemachte Änderungen in der Datei auf dem Webspace gehen dabei allerdings verloren.]]></comment>
				<comment lang="en"><![CDATA[If you want to upload (overwrite) this file on your webspace, you can ignore this changes. In this case, your changes you've already done in this file, will get lost.]]></comment>
				<find><![CDATA[if (!defined('IN_PHPBB'))
{
	exit;
}

if (!defined('IN_PORTAL'))
{
	exit;
}]]></find>
				<action type="replace-with"><![CDATA[if (!defined('IN_PHPBB') || !defined('IN_PORTAL'))
{
   exit;
}]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/portal/_block_config.html">
			<edit>
				<comment lang="de"><![CDATA[Wer die Datei komplett hochladen (überschreiben) möchte, kann diese Änderungen ignorieren. Bereits gemachte Änderungen in der Datei auf dem Webspace gehen dabei allerdings verloren.]]></comment>
				<comment lang="en"><![CDATA[If you want to upload (overwrite) this file on your webspace, you can ignore this changes. In this case, your changes you've already done in this file, will get lost.]]></comment>
				<find><![CDATA[<!-- DEFINE $C_BLOCK_H_L = '<div class="forabg"><div class="inner"><span class="corners-top"><span></span></span><ul class="topiclist"><li class="header">' -->]]></find>
				<inline-edit>
					<inline-find><![CDATA[<ul class="topiclist"><li class="header">]]></inline-find>
					<inline-action type="after-add"><![CDATA[<dl class="icon">]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<comment lang="de"><![CDATA[Wer die Datei komplett hochladen (überschreiben) möchte, kann diese Änderungen ignorieren. Bereits gemachte Änderungen in der Datei auf dem Webspace gehen dabei allerdings verloren.]]></comment>
				<comment lang="en"><![CDATA[If you want to upload (overwrite) this file on your webspace, you can ignore this changes. In this case, your changes you've already done in this file, will get lost.]]></comment>
				<find><![CDATA[<!-- DEFINE $C_BLOCK_H_R = '</li></ul>' -->]]></find>
				<inline-edit>
					<inline-find><![CDATA[</li></ul>]]></inline-find>
					<inline-action type="before-add"><![CDATA[</dl>]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<comment lang="de"><![CDATA[Wer die Datei komplett hochladen (überschreiben) möchte, kann diese Änderungen ignorieren. Bereits gemachte Änderungen in der Datei auf dem Webspace gehen dabei allerdings verloren.]]></comment>
				<comment lang="en"><![CDATA[If you want to upload (overwrite) this file on your webspace, you can ignore this changes. In this case, your changes you've already done in this file, will get lost.]]></comment>
				<find><![CDATA[<!-- Images-URL //-->
<!-- DEFINE $NO_AVATAR_IMG = '/images/no_avatar.gif' -->]]></find>
				<action type="after-add"><![CDATA[<!-- Vertical distance between left/right and center Blocks -->
<!-- DEFINE $BLOCK_DISTANCE = '10px' -->

<!-- show Icons in left/right Blocks? 0=no 1=yes -->
<!-- DEFINE $S_BLOCK_ICON = 1 -->

<!-- postbody top (default 1 by prosilver) 0=no 1=yes -->
<!-- DEFINE $S_POSTBODY_TOP = 1 -->

<!-- override the column width settings of the ACP for this style? 0=no 1=yes -->
<!-- DEFINE $S_COLUMNS_WIDTH_OVERRIDE = 0 -->

<!-- override the column width settings of the ACP - set the width if enabled -->
<!-- DEFINE $PORTAL_LEFT_COLUMN_OVERRIDE = '200' -->
<!-- DEFINE $PORTAL_RIGHT_COLUMN_OVERRIDE = '200' -->]]></action>
			</edit>
		</open>
		<diy-instructions lang="de"><![CDATA[Rufe install/index.php auf und führe den Installer aus

Aktualisiere deine Styles:
    "Administrations-Bereich" (ACP) > "Styles" > "Templates" > jedes > "Aktualisieren"
    "Administrations-Bereich" (ACP) > "Styles" > "Themes" > jedes > "Aktualisieren"
    "Administrations-Bereich" (ACP) > "Styles" > "Grafiksammlungen" > jedes > "Aktualisieren"

Leere den Cache im "Administrations-Bereich" (ACP) > "Allgemein" > "Den Cache leeren"]]></diy-instructions>
		<diy-instructions lang="en"><![CDATA[Browse to install/index.php and run the installer

Refresh your Styles:
    "Administration Control Panel" (ACP) > "Styles" > "Templates" > each > "refresh"
    "Administration Control Panel" (ACP) > "Styles" > "Themes" > each > "refresh"
    "Administration Control Panel" (ACP) > "Styles" > "Imagesets" > each > "refresh"

Clear your cache in the "Administration Control Panel" (ACP) > "General" > "Purge the cache"]]></diy-instructions>
	</action-group>
</mod>